<?php

declare(strict_types=1);

use Fisharebest\Webtrees\I18N;

$tree_title = '';
if (isset($tree) && is_object($tree) && method_exists($tree, 'title')) {
    $tree_title = (string) $tree->title();
}

$search_html = $search ?? ($search_form ?? '');
$user_menu_html = $user_menu ?? ($secondary_menu ?? '');
?>
<header class="k-header">
  <div class="k-brand">
    <img class="k-logo k-logo--light" src="<?= htmlspecialchars($logo_light ?? 'modules_v4/k-theme/resources/assets/images/logo-light.svg', ENT_QUOTES, 'UTF-8') ?>" alt="<?= htmlspecialchars(I18N::translate('K-Theme logo'), ENT_QUOTES, 'UTF-8') ?>">
    <img class="k-logo k-logo--dark" src="<?= htmlspecialchars($logo_dark ?? 'modules_v4/k-theme/resources/assets/images/logo-dark.svg', ENT_QUOTES, 'UTF-8') ?>" alt="<?= htmlspecialchars(I18N::translate('K-Theme logo'), ENT_QUOTES, 'UTF-8') ?>">
    <div class="k-brand__title">
      <?= htmlspecialchars($tree_title ?: I18N::translate('Family tree'), ENT_QUOTES, 'UTF-8') ?>
    </div>
  </div>

  <div class="k-search">
    <?= $search_html ?>
  </div>

  <div class="k-user-menu">
    <button class="k-theme-toggle" type="button" data-k-theme-toggle aria-label="<?= htmlspecialchars(I18N::translate('Toggle dark mode'), ENT_QUOTES, 'UTF-8') ?>">
      <span class="k-theme-toggle__icon" data-k-theme-icon>‚óê</span>
    </button>
    <?= $user_menu_html ?>
  </div>
</header>
